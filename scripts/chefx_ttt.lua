--Chef xtra // TTT traitor finder
--Made by OverlordAkise

--This will print a player if he bought a traitor-only weapon

local function printbought(ply,wepEnt)
    chat.PlaySound()
    print(ply:Name().." bought "..wepEnt:GetClass())
end

local cache = {}

timer.Create("TTTUpdatePlayer", 1, 0, function()
    if GetRoundState() ~= 3 then
        cache = {}
        return
    end
    for k,ply in ipairs(player.GetAll()) do
        for kk,wep in ipairs(ply:GetWeapons()) do
            if wep:IsWeapon() and type(wep:GetOwner()) == "Player" and wep.CanBuy and not table.HasValue(cache,wep) then
                printbought(ply,wep)
                table.insert(cache, wep)
            end
        end
    end
end)
